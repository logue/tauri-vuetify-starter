# 支持的格式指南

## 支持的输入格式

Drop Compress Image 支持以下输入图像格式：

- AV1 Image Format (`*.avif`)
- Microsoft Windows Bitmap Image (`*.bmp`)
- Direct Draw Surface (`*.dds`)
- Farbfeld (`*.ff`)
- Graphics Interchange Format (`*.gif`)
- Radiance High Dynamic Range image file (`*.hdr`)
- Computer icon encoded in ICO file format (`*.ico`)
- Joint Photographic Experts Group (`*.jpg`, `*.jpeg`)
- OpenEXR image (`*.exr`)
- Portable Network Graphic (`*.png`)
- Portable Any Map (`*.pnm`)
- Quite OK Image Format (`*.qoi`)
- Truevision Graphics Adapter (`*.tga`)
- Tagged Image File Format (`*.tif`, `*.tiff`)
- WebP (`*.webp`)
- JPEG 2000 (`*.jp2`, `*.j2c`, `*.j2k`, `*.jpf`, `*.jpx`, `*.jpm`, `*.mj2`, `*.jph`)
- JPEG XL (`*.jxl`)

## 支持的输出格式

本节介绍此程序支持的输出格式。

### PNG（Oxipng）

PNG（Portable Network Graphic）是一种允许您保存图像而不会损失图像质量的格式。
此程序使用 Zopfli，这是 Google 开发的一种特殊压缩技术，可以使 PNG 图像“更小”，但处理时间会更长。

### PNG 功能

- **无损压缩**：无论保存多少次，原始图像质量都不会降低。
- **透明度 (Alpha)**：允许使用透明背景。

### PNG 使用场景

- **徽标、图标和图表**：边框清晰、颜色较少的图像，或需要使用透明背景的图像。
- **网站素材**：用于避免图像质量下降。
- **保留原始数据**：可能反复编辑的图像。

### JPEG（MozJPEG 压缩）

JPEG（Joint Photographic Experts Group）是一种主要用于照片的格式，强调“即使牺牲一些图像质量，也要保持小尺寸”。
本程序中使用的 MozJPEG 是由 Mozilla 开发的一项技术，旨在进一步减小 JPEG 图像大小，同时最大限度地减少视觉质量下降。

#### JPEG 的特性

- **有损压缩**：为了减小文件大小，会删除人眼难以察觉的信息，从而略微降低图像质量（压缩率越高，质量下降越明显）。
- **高压缩率**：可以将包含多种色彩的复杂图像（例如照片）压缩到极小的尺寸。
- **jpegli**：与传统 JPEG 相比，在相同文件大小下，它可以实现更高的图像质量，甚至可以在相同图像质量下实现更小的文件大小。它使用与 JPEG XL 相同的技术，可实现高质量压缩。

#### JPEG 使用场景

- **普通照片**：包含多种色彩和渐变的图像，例如风景和人像。
- **网站上的大型照片**：当文件大小是加快加载速度的首要考虑因素时。

### WebP

WebP 是由 Google 开发的一种全新图片格式，它融合了 JPEG 和 PNG 的优点。

#### WebP 特点

- **高压缩率和高画质**：在保持与 JPEG 相同的压缩率的同时，保持比 PNG 更高的画质。
- **有损/无损支持**：支持有损压缩（用于照片）和无损压缩（用于插图）。
- **透明度 (Alpha) 和动画**：支持类似 PNG 的背景透明度和类似 GIF 的动画（比 GIF 画质更高、文件更小）。

#### WebP 使用场景

- **通用网站图片**：使用此格式替换大多数图片，包括照片、图标和动画，以提高网站速度。
- **通用图片格式**：当您不想费心选择文件格式时，此格式非常有用。

### AVIF

AVIF（AV1 Image Format）是一种比 WebP 更新的“下一代”图像格式。它采用高质量视频技术（即 AV1）创建。

### AVIF 特性

- **目前顶级的压缩率**：在保持与 JPEG 或 WebP 相同画质的情况下，文件体积更小。
- **高品质色彩呈现**：支持 HDR（高动态范围）和广色域，可呈现更丰富的对比度和鲜艳的色彩。
- **透明度 (Alpha) 和动画**：支持透明度和动画。

### AVIF 使用场景

- **需要高质量图像的 Web 内容**：非常适合同时实现高质量图像和快速加载，例如用于 Netflix 等网站的缩略图。
- **进一步提升网站速度**：当目标速度比 WebP 更快时，可考虑使用此格式。

### JPEG XL

JPEG XL 是一种新格式，旨在克服先前 JPEG 标准的缺点，成为终极图像格式。

#### JPEG XL 的功能

- **高兼容性**：将现有 JPEG 图像转换为更小尺寸，且几乎不损失图像质量。
- **全方位支持**：为任何类型的图像（包括照片、插图和图表）实现高压缩率和高质量图像。
- **多功能**：支持无损和有损压缩、透明度 (Alpha)、动画和高质量色彩（广色域和 HDR）。
- **渐进式显示**：图像逐渐变得更清晰，减少感知等待时间，尤其适用于大图像。

#### JPEG XL 的用例

- **图像格式统一**：预计这种单一格式最终将取代包括 JPEG、PNG 和 GIF 在内的多种格式。
- **图像归档**：非常适合将 JPEG 图像保存为较小尺寸，且不降低原始图像质量。

## 输出格式摘要

| 格式          | 主要优点                                       | 适用场景                                             | 有损 | 无损   | Alpha通道 | HDR | 压缩比 | 压缩负载 |
| ------------- | ---------------------------------------------- | ---------------------------------------------------- | ---- | ------ | --------- | --- | ------ | -------- |
| PNG (Oxipng)  | 无图像劣化，背景透明。                         | 适用于徽标、图标、图表。                             | ❌️   | ✅️     | ✅️        | ❌️  | 低     | 高       |
| JPEG (jpegli) | 图片可压缩至极小尺寸。高质量压缩。             | 常用网页图片。                                       | ✅️   | ❌️     | ❌️        | ❌️  | 高     | 低       |
| WebP          | 高压缩率，高质量，支持透明度和动画。           | 适用于网站的通用图片。                               | ✅️   | ✅️     | ✅️        | ❌️  | 中     | 中       |
| AVIF          | **最高压缩比和高图像质量**，支持广色域 (HDR)。 | 适用于既需要高图像质量又需要快速显示的网站。         | ✅️   | ❌️[^1] | ✅️        | ✅️  | 高     | 高       |
| JPEG XL       | **终极格式**，支持所有功能并与 JPEG 兼容。     | 用于减小现有 JPEG 文件的大小，并为未来统一图像格式。 | ✅️   | ✅️     | ✅️        | ✅️  | 高     | 低       |

[^1]:
    AVIF 本身是无损格式，但由于其高负载和大文件体积，本程序并未实现。
    如需无损使用，我们建议使用 JPEG XL。
    参考：<https://github.com/AOMediaCodec/av1-avif/issues/111>
